/* * Copyright (c) 2020 Ruslan Potekhin */package com.feedapp.app.ui.adaptersimport android.content.Contextimport android.graphics.Colorimport android.view.LayoutInflaterimport android.view.ViewGroupimport androidx.recyclerview.widget.DiffUtilimport androidx.recyclerview.widget.ListAdapterimport com.feedapp.app.Rimport com.feedapp.app.data.interfaces.SearchMealsResultimport com.feedapp.app.data.models.FoodProductimport com.feedapp.app.ui.viewholders.MealApiViewHolderimport com.feedapp.app.util.getValidLetterclass FoodProductRecyclerAdapter(    val context: Context,    private val searchMealsResult: SearchMealsResult) :    ListAdapter<FoodProduct, MealApiViewHolder>(DIFF_CALLBACK) {    var colorList: MutableList<Int> = arrayListOf()    companion object {        private const val title = "title"        val defaultColor = Color.rgb(253, 245, 230)        val DIFF_CALLBACK = object : DiffUtil.ItemCallback<FoodProduct>() {            override fun areItemsTheSame(oldItem: FoodProduct, newItem: FoodProduct): Boolean {                return oldItem.id == newItem.id            }            override fun areContentsTheSame(oldItem: FoodProduct, newItem: FoodProduct): Boolean {                return false            }        }    }    override fun onBindViewHolder(holder: MealApiViewHolder, position: Int) {        val food = getItem(position)        holder.textTitle.text = food.name        holder.mainLayout.setOnClickListener {            startDetailedActivity(food)        }        // set Color to image        try {            holder.image.setColorFilter(colorList[position])            // set Letter into imageView            val letter = food.name.getOrNull(0).toString().getValidLetter()            holder.imageLetter.text = letter        } catch (e: IndexOutOfBoundsException) {            e.printStackTrace()            holder.image.setColorFilter(defaultColor)        }    }    private fun startDetailedActivity(food: FoodProduct) {        searchMealsResult.startDetailedActivity(food)    }    override fun onCreateViewHolder(        parent: ViewGroup,        viewType: Int    ): MealApiViewHolder {        val holder = LayoutInflater.from(parent.context)            .inflate(R.layout.vh_meal_api, parent, false)        return MealApiViewHolder(holder)    }}